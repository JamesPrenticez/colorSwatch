<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Color Swatch</title>
    <meta name="description" content="A simple color swatch that fits to the available view window on load">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="assets/css/style.css">

    <!-- Paper.js include -->
    <script type="text/javascript" src="assets/lib/paper-full.min.js"></script>
    <script type="text/javascript" src="assets/lib/jquery-3.5.1.min.js"></script>

    <script type="text/paperscript" canvas="mycanvas">
      var gridWidth = window.innerWidth;  
      var gridHeight = window.innerHeight;
  
      var wRef = 255 * gridWidth;
      var hRef = 255 * gridHeight;

      for (var x=0; x <= gridWidth; x += 20){
        for (var y = 0; y <= gridHeight; y += 20){
          var origin = new Point(x, y);
          var termination = new Point(x+50, y+50);
          var rectangle = new Rectangle(origin, termination);
          var path = new Path.Rectangle(rectangle);
          

          path.fillColor = rgbCode(origin);
          path.selected = false;
        }
      }
      // Create a circle shaped path with a radius of 10 at {x: 0, y: 0}:

      var text = new PointText(new Point(200, 50));
      text.justification = 'left';
      text.fillColor = 'black';
    
      function rgbCode(pnt){
        var r = ((pnt.x * 255) / wRef) * 255;
        var g = ((pnt.y * 255) / hRef) * 255;
        var b =  255 - ((((pnt.y + pnt.x) / 2) * 255) / ((hRef + wRef) / 2) * 255);  

        return "rgb(" + Math.ceil(r) + ", " + Math.ceil(g) + "," + Math.ceil(b) + ")";
      }

      tool.onMouseMove = function(event) {
        // Whenever the user moves the mouse, move the path
        // to that position:
        var maxPoint  = new Point(view.size.width, view.size.height);
        var shift = new Point(60, 0);
        var size = new Size(shift);
        
        text.content = rgbCode(event.point);
        if (event.point.x + shift.x + size.width >= maxPoint.x) {
          text.position = event.point - shift;
        } else {
          text.position = event.point + shift;
        }
        
      }
    </script>
    
  </head>
  <body>
    <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    <canvas id="mycanvas" resize="true"></canvas>
    
  </body>
</html>